(this["webpackJsonpreact-mobx-drag-n-drop"]=this["webpackJsonpreact-mobx-drag-n-drop"]||[]).push([[0],{25:function(n,t,e){},29:function(n,t,e){"use strict";e.r(t);var r=e(2),i=e(1),o=e.n(i),a=e(13),c=e.n(a),u=(e(25),e(3)),l=e(5),d=e(6),s=function(){function n(t,e){Object(l.a)(this,n),this.ref=void 0,this.refPhantom=void 0,this.isTouchMove=!1,this.lastTouchMoveEvent=null,this.onDragStartCb=function(){},this.onDragEndCb=function(){},this.destroyCb=function(){},this.ref=t,this.refPhantom=e}return Object(d.a)(n,[{key:"onDragStart",value:function(n){this.onDragStartCb=n}},{key:"onDragEnd",value:function(n){this.onDragEndCb=n}},{key:"handleDragStart",value:function(n){var t,e,r;if((null===n||void 0===n||null===(t=n.dataTransfer)||void 0===t?void 0:t.setDragImage)&&(null===(e=this.ref)||void 0===e?void 0:e.current)&&(null===(r=this.refPhantom)||void 0===r?void 0:r.current)){this.onDragStartCb();var i=this.refPhantom.current,o=this.ref.current.getBoundingClientRect();this.refPhantom.current.style.left="-10000px",this.refPhantom.current.style.top="-10000px",this.refPhantom.current.style.display="block",n.dataTransfer.setDragImage(i,o.width/2,o.height/2)}}},{key:"handleDragEnd",value:function(n){this.onDragEndCb(n.clientX,n.clientY)}},{key:"movePhantomItemWithTouch",value:function(n,t){var e;(null===(e=this.refPhantom)||void 0===e?void 0:e.current)&&(this.refPhantom.current.style.left=n+"px",this.refPhantom.current.style.top=t+"px",this.refPhantom.current.style.display="block")}},{key:"hidePhantomItem",value:function(){var n;(null===(n=this.refPhantom)||void 0===n?void 0:n.current)&&(this.refPhantom.current.style.display="none")}},{key:"handleEventTouchMove",value:function(n){var t;if(n.preventDefault(),this.lastTouchMoveEvent=n,this.isTouchMove||(this.isTouchMove=!0,this.onDragStartCb()),null===(t=this.ref)||void 0===t?void 0:t.current){var e=n.touches[0].pageX-this.ref.current.offsetWidth/2,r=n.touches[0].pageY-this.ref.current.offsetWidth/2;this.movePhantomItemWithTouch(e,r)}}},{key:"addEventListeners",value:function(){var n,t,e,r,i,o=this,a=function(n){o.handleEventTouchMove(n)},c=function(){o.isTouchMove=!1,o.hidePhantomItem();var n=function(n){var t={x:0,y:0};return n&&(t.x=n.targetTouches[0].clientX,t.y=n.targetTouches[0].clientY),t}(o.lastTouchMoveEvent);o.onDragEndCb(n.x,n.y)},u=function(n){o.handleDragStart(n)},l=function(n){o.handleDragEnd(n)};null===(n=this.ref.current)||void 0===n||n.addEventListener("touchmove",a),null===(t=this.ref.current)||void 0===t||t.addEventListener("touchend",c),null===(e=this.ref.current)||void 0===e||e.addEventListener("touchcancel",c),null===(r=this.ref.current)||void 0===r||r.addEventListener("dragstart",u),null===(i=this.ref.current)||void 0===i||i.addEventListener("dragend",l),this.destroyCb=function(){var n,t,e,r,i;null===(n=o.ref.current)||void 0===n||n.removeEventListener("touchmove",a),null===(t=o.ref.current)||void 0===t||t.removeEventListener("touchend",c),null===(e=o.ref.current)||void 0===e||e.removeEventListener("touchcancel",c),null===(r=o.ref.current)||void 0===r||r.removeEventListener("dragstart",u),null===(i=o.ref.current)||void 0===i||i.removeEventListener("dragend",l)}}},{key:"destroy",value:function(){this.destroyCb()}}]),n}(),h=e(4);function f(){var n=Object(u.a)(["\n  position: absolute;\n  display: none;\n  z-index: 999;\n"]);return f=function(){return n},n}function v(){var n=Object(u.a)(["\n  color: red;\n  position: absolute;\n  right: 0;\n  top: 0;\n  line-height: 20px;\n"]);return v=function(){return n},n}function g(){var n=Object(u.a)(["\n  pointer-events: none;\n  user-select: none;\n"]);return g=function(){return n},n}function m(){var n=Object(u.a)(["\n  position: relative;\n  background-color: ",";\n  width: 120px;\n  height: 120px;\n  border-radius: 70px;\n  line-height: 120px;\n  text-align: center;\n\n  :hover {\n    cursor: ",";\n  }\n"]);return m=function(){return n},n}var b=h.a.div(m(),(function(n){return n.type}),(function(n){return n.draggable&&"grab"})),p=h.a.div(g()),I=Object(h.a)(p)(v()),j=Object(h.a)(b)(f()),x=o.a.forwardRef((function(n,t){var e=n.type,i=n.text;return Object(r.jsx)(j,{ref:t,type:e,children:Object(r.jsxs)(p,{children:[i,"_"]})})}));var y=function(n){var t=n.onDragStart,e=n.onDragEnd,o=n.multiplier,a=n.text,c=n.name,u=n.type,l=Object(i.useRef)(null),d=Object(i.useRef)(null);return Object(i.useEffect)((function(){var n=new s(l,d);return o&&(n.addEventListeners(),n.onDragStart((function(){return t(c)})),n.onDragEnd((function(n,t){return e(n,t)}))),function(){return n.destroy()}}),[o,c]),Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(x,{ref:d,text:a,type:u}),Object(r.jsxs)(b,{draggable:!!o,ref:l,type:u,children:[Object(r.jsxs)(I,{children:["x",o]}),Object(r.jsx)(p,{children:a})]})]})};function O(){var n=Object(u.a)(["\n  height: 160px;\n\n  display: flex;\n  align-items: center;\n  justify-content: space-evenly;\n"]);return O=function(){return n},n}function D(){var n=Object(u.a)(["\n  border: 2px solid #000;\n  width: 330px;\n  height: 160px;\n  margin-bottom: 20px;\n  background-color: ",";\n"]);return D=function(){return n},n}var C=h.a.div(D(),(function(n){return n.isHighlight?"transparent":"#ccc"})),E=h.a.div(O());var T=function(n){var t=n.id,e=n.children,i=n.isHighlight;return Object(r.jsx)(C,{"data-type":"Drag'n'Drop_container","data-id":t,isHighlight:i,children:Object(r.jsx)(E,{children:e})})},F=e(19),P=e(0),M=e(12),k=e(17);function w(n){return(null===n||void 0===n?void 0:n.hasAttribute("data-type"))&&"Drag'n'Drop_container"===n.getAttribute("data-type")}var L=new(function(){function n(){var t=this;Object(l.a)(this,n),this.draggableFromContainerItemInfo=null,this.items=[{name:"elem1",multiplier:5,color:"blue",containerId:1},{name:"elem2",multiplier:5,color:"blue",containerId:1},{name:"elem1",multiplier:5,color:"green",containerId:4},{name:"elem2",multiplier:5,color:"green",containerId:4}],this.containers=[{id:1,isHighlight:!0,allowedToMoveIn:[2]},{id:2,isHighlight:!0,allowedToMoveIn:[1]},{id:3,isHighlight:!0,allowedToMoveIn:[4]},{id:4,isHighlight:!0,allowedToMoveIn:[3]}],this.itemsInContainer=Object(k.a)((function(n){return t.items.filter((function(t){return t.containerId===n}))})),Object(P.x)(this)}return Object(d.a)(n,[{key:"setDraggableFromContainerId",value:function(n,t,e){this.draggableFromContainerItemInfo={containerId:n,itemName:t,allowedToMoveIn:e}}},{key:"clearDraggableFromContainerId",value:function(n,t){var e,r,i=this,o=function(n,t){var e=null;if(!(e=document.elementFromPoint(n,t)))return null;for(var r=0;r<5;++r){var i;if(e&&w(e)){var o=e.getAttribute("data-id");if(o)return Number(o)}e=null===(i=e)||void 0===i?void 0:i.parentElement}return null}(n,t),a=o&&(null===(e=this.draggableFromContainerItemInfo)||void 0===e?void 0:e.allowedToMoveIn.includes(o))&&null!==this.draggableFromContainerItemInfo&&o!==this.draggableFromContainerItemInfo.containerId&&(null===(r=this.draggableFromContainerItemInfo)||void 0===r?void 0:r.itemName);if(o&&a){var c=this.items.find((function(n){var t=n.containerId,e=n.name;return i.draggableFromContainerItemInfo&&e===i.draggableFromContainerItemInfo.itemName&&t===o})),u=this.items.find((function(n){var t=n.containerId,e=n.name;return i.draggableFromContainerItemInfo&&e===i.draggableFromContainerItemInfo.itemName&&t===i.draggableFromContainerItemInfo.containerId}));u&&u.multiplier&&(u.multiplier-=1,c?c.multiplier+=1:this.items.push(Object(M.a)(Object(M.a)({},u),{},{multiplier:1,containerId:o})))}this.draggableFromContainerItemInfo=null}}]),n}());Object(P.j)((function(){if(null!==L.draggableFromContainerItemInfo){var n=L.containers.find((function(n){var t;return n.id===(null===(t=L.draggableFromContainerItemInfo)||void 0===t?void 0:t.containerId)})),t=[];n&&(t=Object(F.a)(n.allowedToMoveIn)),L.containers.forEach((function(n){return Object(P.D)((function(){var e=!1;t.length&&t.includes(n.id)&&(e=!0,L.containers[n.id]&&(L.containers[n.id].isHighlight=!0));var r=L.containers.find((function(t){return t.id===n.id}));r&&(r.isHighlight=e)}))}))}else L.containers.forEach((function(n){return Object(P.D)((function(){return n.isHighlight=!0}))}))})),Object(P.j)((function(){L.items.map((function(n){return Object(P.D)((function(){n.multiplier<=0?n.isDraggable=!1:n.isDraggable=!0}))}))}));var H=L,S=e(18);var N=Object(S.a)((function(){return Object(r.jsx)("div",{children:H.containers.map((function(n){return Object(r.jsx)(T,{id:n.id,isHighlight:!!n.isHighlight,children:H.itemsInContainer(n.id).map((function(t){return Object(r.jsx)(y,{name:t.name,onDragEnd:function(n,t){H.clearDraggableFromContainerId(n,t)},onDragStart:function(t){H.setDraggableFromContainerId(n.id,t,n.allowedToMoveIn)},multiplier:t.multiplier,type:t.color,text:t.name},"".concat(t.name,"_").concat(t.containerId))}))},n.id)}))})}));function R(){var n=Object(u.a)(["\n  height: 100vh;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n"]);return R=function(){return n},n}var W=h.a.div(R());var _=function(){return Object(r.jsx)(W,{children:Object(r.jsx)(N,{})})},A=function(n){n&&n instanceof Function&&e.e(3).then(e.bind(null,30)).then((function(t){var e=t.getCLS,r=t.getFID,i=t.getFCP,o=t.getLCP,a=t.getTTFB;e(n),r(n),i(n),o(n),a(n)}))};c.a.render(Object(r.jsx)(o.a.StrictMode,{children:Object(r.jsx)(_,{})}),document.getElementById("root")),A()}},[[29,1,2]]]);
//# sourceMappingURL=main.71321344.chunk.js.map